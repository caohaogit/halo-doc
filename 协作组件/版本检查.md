## 版本检查

框架内置了对应用系统线上部署时的版本检查功能。该功能核心代码在halo-tune组件中。目前支持的检查的部署单元有两种：Java应用，数据库基线。

1. Java应用的版本检查：在Java应用启动时，框架会自动从pom文件中提取版本号（提取规则：取pom文件版本号的以.分割的前三位数字），之后与zookeeper中维护的版本号（zookeeper节点：/应用名称/应用类型/version/global）做比对检查，如果比对失败，则会向日志中写入错误异常。
2. 数据库基线版本检查：在serviceapp应用启动时，框架会从数据库中读取flyway的元数据表（默认为：schema\_versions）最后一条记录，并提取版本号信息（提取规则：取pom文件版本号的以.分割的前三位数字），之后与zookeeper中维护的版本号（zookeeper节点：/应用名称/db/version/global）做比对检查，如果比对失败，则向日志中写入错误。

注意：数据库基线版本校验需要依赖dbversion-checker插件。

